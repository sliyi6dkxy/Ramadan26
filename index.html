<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¥Ù…Ø³Ø§ÙƒÙŠØ© Ø±Ù…Ø¶Ø§Ù†</title>

<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:'Tajawal', sans-serif;
  background:#fbf6e8;
  color:#4b3b2a;
  min-height:100vh;
  text-align:center;
}

.container{
  max-width:420px;
  margin:0 auto;
  padding:20px 18px 24px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
}

/* ===== Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø¯Ø®ÙˆÙ„ Ø§Ù„ØµÙØ­Ø© ===== */
.page-enter{
  opacity:0;
  transform:translateY(40px);
}
.page-enter-active{
  opacity:1;
  transform:translateY(0);
  transition:opacity .8s ease, transform .8s ease;
}

/* Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ */
.message{
  margin-bottom:18px;
  text-align:center;
  position:relative;
}
.message .moon{
  font-size:27px;
  margin-bottom:6px;
  display:inline-block;
  animation:moonFloat 2s ease-in-out infinite alternate;
}
@keyframes moonFloat{
  0%{ transform:translateY(0);}
  50%{ transform:translateY(-8px);}
  100%{ transform:translateY(0);}
}
.message h1{ font-size:24px; font-weight:600; margin:6px 0; }
.message p{ font-size:17px; line-height:1.7; margin:0; opacity:.9; }

/* Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ */
.hijri-date{
  font-size:16px;
  font-weight:600;
  margin-bottom:10px;
  opacity:.9;
}

/* Ø§Ù„ØªØ³Ø¬ÙŠÙ„ */
.register-box{ text-align:center; margin-top:14px; }
.register-box .subtitle{ font-size:16.5px; line-height:1.8; margin-bottom:18px; }
.input-group{ display:flex; gap:10px; }
input{ flex:1; padding:12px 16px; font-size:15.5px; border-radius:20px; border:1px solid #d6c6a5; outline:none; }
button{ padding:12px 18px; font-size:15.5px; border-radius:20px; border:none; background:#7a9b7e; color:white; cursor:pointer; }
button:hover{ background:#688c6d; }
.hidden{ display:none; }

/* Ø§Ù„Ø¹Ø¯Ø§Ø¯ */
.counter-box{
  background:#fff;
  border-radius:16px;
  padding:14px 12px;
  margin:10px 0 20px;
  box-shadow:0 5px 12px rgba(0,0,0,.06);
}
.counter-title{ font-size:15.5px; margin-bottom:4px; }
.counter-time{ font-size:22px; font-weight:600; letter-spacing:2px; margin:6px 0; }
.counter-note{ font-size:14.5px; opacity:.9; }

/* Ø¨Ø§Ù‚ÙŠ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ ÙƒÙ…Ø§ Ù‡Ùˆ */
</style>
</head>

<body>

<div class="container">

  <div id="registerBox">
    <div class="message">
      <div class="moon">ğŸŒ™</div>
      <h1>Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ…</h1>
      <p>Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ù„ÙŠØµÙ„Ùƒ ÙƒÙ„ Ø¬Ø¯ÙŠØ¯ ÙŠÙˆÙ…ÙŠÙ‹Ø§ Ø®Ù„Ø§Ù„ Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù…Ø¨Ø§Ø±Ùƒ</p>
    </div>

    <div class="register-box">
      <div class="subtitle">Ù…ØªØ§Ø¨Ø¹Ø© Ø®ÙÙŠÙØ© â€¢ ØªØ°ÙƒÙŠØ± â€¢ Ø£Ø¬Ø± Ø¨Ø¥Ø°Ù† Ø§Ù„Ù„Ù‡</div>
      <div class="input-group">
        <input type="text" id="username" placeholder="Ø§Ø³Ù…Ùƒ">
        <button onclick="saveName()">Ù…ØªØ§Ø¨Ø¹Ø©</button>
      </div>
    </div>
  </div>

  <div id="welcomeBox" class="hidden"></div>

</div>

<script>
const STORAGE_KEY = "ramadan_user_name";
const FAJR_TIME = "05:52";
const MAGHRIB_TIME = "18:40";

/* ======= Ø¨Ø¯Ø§ÙŠØ© Ø±Ù…Ø¶Ø§Ù† (ØºÙŠÙ‘Ø± Ø§Ù„ØªØ§Ø±ÙŠØ® Ù‡Ù†Ø§ ÙÙ‚Ø·) ======= */
const ramadanStart = new Date(2026, 1, 11); // 11 Ù…Ø§Ø±Ø³ = 1 Ø±Ù…Ø¶Ø§Ù† (Ù…Ø«Ø§Ù„)

/* Ø£ÙŠØ§Ù… Ø±Ù…Ø¶Ø§Ù† */
const hijriDays = [
  "1 Ø±Ù…Ø¶Ø§Ù†","2 Ø±Ù…Ø¶Ø§Ù†","3 Ø±Ù…Ø¶Ø§Ù†","4 Ø±Ù…Ø¶Ø§Ù†","5 Ø±Ù…Ø¶Ø§Ù†",
  "6 Ø±Ù…Ø¶Ø§Ù†","7 Ø±Ù…Ø¶Ø§Ù†","8 Ø±Ù…Ø¶Ø§Ù†","9 Ø±Ù…Ø¶Ø§Ù†","10 Ø±Ù…Ø¶Ø§Ù†",
  "11 Ø±Ù…Ø¶Ø§Ù†","12 Ø±Ù…Ø¶Ø§Ù†","13 Ø±Ù…Ø¶Ø§Ù†","14 Ø±Ù…Ø¶Ø§Ù†","15 Ø±Ù…Ø¶Ø§Ù†",
  "16 Ø±Ù…Ø¶Ø§Ù†","17 Ø±Ù…Ø¶Ø§Ù†","18 Ø±Ù…Ø¶Ø§Ù†","19 Ø±Ù…Ø¶Ø§Ù†","20 Ø±Ù…Ø¶Ø§Ù†",
  "21 Ø±Ù…Ø¶Ø§Ù†","22 Ø±Ù…Ø¶Ø§Ù†","23 Ø±Ù…Ø¶Ø§Ù†","24 Ø±Ù…Ø¶Ø§Ù†","25 Ø±Ù…Ø¶Ø§Ù†",
  "26 Ø±Ù…Ø¶Ø§Ù†","27 Ø±Ù…Ø¶Ø§Ù†","28 Ø±Ù…Ø¶Ø§Ù†","29 Ø±Ù…Ø¶Ø§Ù†","30 Ø±Ù…Ø¶Ø§Ù†"
];

/* Ø­Ø³Ø§Ø¨ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ */
function getHijriDate(){
  const today = new Date();
  const diffDays = Math.floor((today - ramadanStart) / (1000*60*60*24));
  if(diffDays < 0 || diffDays >= hijriDays.length) return "";
  return "Ø§Ù„ÙŠÙˆÙ…: " + hijriDays[diffDays];
}

// Ø­ÙØ¸ Ø§Ù„Ø§Ø³Ù…
function saveName(){
  const name = document.getElementById("username").value.trim();
  if(!name) return;
  localStorage.setItem(STORAGE_KEY, name);
  showWelcome(name,true);
}

// Ø¹Ø±Ø¶ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
function showWelcome(name, firstTime){
  document.getElementById("registerBox").classList.add("hidden");
  const box = document.getElementById("welcomeBox");
  box.classList.remove("hidden");

  if(firstTime){
    box.classList.add("page-enter");
    requestAnimationFrame(()=>{
      box.classList.add("page-enter-active");
    });
  }

  box.innerHTML = `
    <div class="message">
      <div class="moon">ğŸŒ™</div>
      <h1>Ù…Ø±Ø­Ø¨Ù‹Ø§ ${name}</h1>
      <p>Ù†Ø³Ø£Ù„ Ø§Ù„Ù„Ù‡ Ø£Ù† ÙŠÙƒØªØ¨ Ù„Ùƒ Ø§Ù„Ø£Ø¬Ø± Ø§Ù„ÙŠÙˆÙ…</p>
    </div>

    <div class="hijri-date">${getHijriDate()}</div>

    <div class="counter-box">
      <div class="counter-title" id="counterTitle"></div>
      <div class="counter-time" id="counterTime">-- : -- : --</div>
      <div class="counter-note" id="counterNote"></div>
    </div>
  `;

  window.scrollTo(0,0);
  startCounter();
}

// Ø§Ù„Ø¹Ø¯Ø§Ø¯ (ÙƒÙ…Ø§ Ù‡Ùˆ)
function startCounter(){
  const title = document.getElementById("counterTitle");
  const timeEl = document.getElementById("counterTime");
  const note = document.getElementById("counterNote");

  function update(){
    const now = new Date();
    const [fh,fm] = FAJR_TIME.split(":").map(Number);
    const [mh,mm] = MAGHRIB_TIME.split(":").map(Number);

    const today = new Date();
    const fajr = new Date(today.getFullYear(), today.getMonth(), today.getDate(), fh, fm);
    const maghrib = new Date(today.getFullYear(), today.getMonth(), today.getDate(), mh, mm);

    let target;
    if(now<fajr){ target=fajr; title.textContent="ğŸŒ™ Ù…ØªØ¨Ù‚ÙŠ Ø¹Ù„Ù‰ Ø£Ø°Ø§Ù† Ø§Ù„ÙØ¬Ø±"; }
    else if(now<maghrib){ target=maghrib; title.textContent="â³ Ù…ØªØ¨Ù‚ÙŠ Ø¹Ù„Ù‰ Ø£Ø°Ø§Ù† Ø§Ù„Ù…ØºØ±Ø¨"; }
    else{ target=new Date(today.getFullYear(), today.getMonth(), today.getDate()+1, fh, fm); title.textContent="ğŸŒ™ Ù…ØªØ¨Ù‚ÙŠ Ø¹Ù„Ù‰ Ø£Ø°Ø§Ù† Ø§Ù„ÙØ¬Ø±"; }

    const diff = target-now;
    const h = String(Math.floor(diff/3600000)).padStart(2,"0");
    const m = String(Math.floor((diff%3600000)/60000)).padStart(2,"0");
    const s = String(Math.floor((diff%60000)/1000)).padStart(2,"0");
    timeEl.textContent=`${h} : ${m} : ${s}`;
  }

  update();
  setInterval(update,1000);
}

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
window.onload = ()=>{
  const savedName = localStorage.getItem(STORAGE_KEY);
  if(savedName) showWelcome(savedName,false);
};
</script>

</body>
</html>
