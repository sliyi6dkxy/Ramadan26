<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¥Ù…Ø³Ø§ÙƒÙŠØ© Ø±Ù…Ø¶Ø§Ù†</title>

<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:'Tajawal', sans-serif;
  background:#fbf6e8;
  color:#4b3b2a;
  min-height:100vh;
}

.container{
  max-width:420px;
  margin:0 auto;
  padding:34px 18px 24px;
}

/* ===== Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ===== */
.message{
  text-align:center;
  margin-bottom:22px;
  animation:fadeDown .7s ease forwards;
}

.message .moon{
  font-size:27px;
  margin-bottom:6px;
}

.message h1{
  font-size:24px;
  font-weight:600;
  margin:6px 0;
}

.message p{
  font-size:17px;
  line-height:1.7;
  margin:0;
  opacity:.9;
}

@keyframes fadeDown{
  from{opacity:0; transform:translateY(-10px);}
  to{opacity:1; transform:translateY(0);}
}

/* ===== Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ===== */
.register-box{
  text-align:center;
  margin-top:14px;
}

.register-box .subtitle{
  font-size:16.5px;
  line-height:1.8;
  margin-bottom:18px;
}

.input-group{
  display:flex;
  gap:10px;
}

input{
  flex:1;
  padding:12px 16px;
  font-size:15.5px;
  border-radius:20px;
  border:1px solid #d6c6a5;
  outline:none;
}

button{
  padding:12px 18px;
  font-size:15.5px;
  border-radius:20px;
  border:none;
  background:#7a9b7e;
  color:white;
  cursor:pointer;
}

button:hover{background:#688c6d}
.hidden{display:none}

/* ===== Ø§Ù„Ø¹Ø¯Ø§Ø¯ ===== */
.counter-box{
  background:#fff;
  border-radius:16px;
  padding:14px 12px;
  text-align:center;
  margin:10px 0 22px;
  box-shadow:0 5px 12px rgba(0,0,0,.06);
  animation:fadeUp .6s ease forwards;
}

.counter-title{
  font-size:15.5px;
  margin-bottom:4px;
}

.counter-time{
  font-size:22px;
  font-weight:600;
  letter-spacing:2px;
  margin:6px 0;
}

.counter-note{
  font-size:14.5px;
  opacity:.9;
}

@keyframes fadeUp{
  from{opacity:0; transform:translateY(10px);}
  to{opacity:1; transform:translateY(0);}
}
</style>
</head>

<body>

<div class="container">

  <div id="registerBox">
    <div class="message">
      <div class="moon">ğŸŒ™</div>
      <h1>Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ…</h1>
      <p>Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ù„ÙŠØµÙ„Ùƒ ÙƒÙ„ Ø¬Ø¯ÙŠØ¯ ÙŠÙˆÙ…ÙŠÙ‹Ø§ Ø®Ù„Ø§Ù„ Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù…Ø¨Ø§Ø±Ùƒ</p>
    </div>

    <div class="register-box">
      <div class="subtitle">Ù…ØªØ§Ø¨Ø¹Ø© Ø®ÙÙŠÙØ© â€¢ ØªØ°ÙƒÙŠØ± â€¢ Ø£Ø¬Ø± Ø¨Ø¥Ø°Ù† Ø§Ù„Ù„Ù‡</div>
      <div class="input-group">
        <input type="text" id="username" placeholder="Ø§Ø³Ù…Ùƒ">
        <button onclick="saveName()">Ù…ØªØ§Ø¨Ø¹Ø©</button>
      </div>
    </div>
  </div>

  <div id="welcomeBox" class="hidden"></div>

</div>

<script>
const STORAGE_KEY = "ramadan_user_name";
const FAJR_TIME = "05:12";
const MAGHRIB_TIME = "18:47";
const TIME_OFFSET_MINUTES = 0;

function saveName(){
  const name = document.getElementById("username").value.trim();
  if(!name) return;
  localStorage.setItem(STORAGE_KEY, name);
  showWelcome(name, true);
}

function showWelcome(name, firstTime){
  document.getElementById("registerBox").classList.add("hidden");
  const box = document.getElementById("welcomeBox");
  box.classList.remove("hidden");

  box.innerHTML = `
    <div class="message">
      <div class="moon">ğŸŒ™</div>
      <h1>Ù…Ø±Ø­Ø¨Ù‹Ø§ ${name}</h1>
      <p>${firstTime ? "Ù†Ø³Ø£Ù„ Ø§Ù„Ù„Ù‡ Ø£Ù† ÙŠØ¨Ø§Ø±Ùƒ Ù„Ùƒ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±" : "Ù†Ø³Ø£Ù„ Ø§Ù„Ù„Ù‡ Ø£Ù† ÙŠÙƒØªØ¨ Ù„Ùƒ Ø§Ù„Ø£Ø¬Ø± Ø§Ù„ÙŠÙˆÙ…"}</p>
    </div>

    <div class="counter-box">
      <div class="counter-title" id="counterTitle"></div>
      <div class="counter-time" id="counterTime">-- : -- : --</div>
      <div class="counter-note" id="counterNote"></div>
    </div>
  `;
  startCounter();
}

function startCounter(){
  const title = document.getElementById("counterTitle");
  const timeEl = document.getElementById("counterTime");
  const note = document.getElementById("counterNote");

  function update(){
    const now = new Date();
    now.setMinutes(now.getMinutes() + TIME_OFFSET_MINUTES);

    const [fh, fm] = FAJR_TIME.split(":").map(Number);
    const [mh, mm] = MAGHRIB_TIME.split(":").map(Number);

    const today = new Date();
    const fajr = new Date(today.getFullYear(), today.getMonth(), today.getDate(), fh, fm);
    const maghrib = new Date(today.getFullYear(), today.getMonth(), today.getDate(), mh, mm);

    let target;
    if(now < fajr){
      target = fajr;
      title.textContent = "ğŸŒ™ Ù…ØªØ¨Ù‚ÙŠ Ø¹Ù„Ù‰ Ø£Ø°Ø§Ù† Ø§Ù„ÙØ¬Ø±";
    } else if(now < maghrib){
      target = maghrib;
      title.textContent = "â³ Ù…ØªØ¨Ù‚ÙŠ Ø¹Ù„Ù‰ Ø£Ø°Ø§Ù† Ø§Ù„Ù…ØºØ±Ø¨";
    } else {
      target = new Date(today.getFullYear(), today.getMonth(), today.getDate()+1, fh, fm);
      title.textContent = "ğŸŒ™ Ù…ØªØ¨Ù‚ÙŠ Ø¹Ù„Ù‰ Ø£Ø°Ø§Ù† Ø§Ù„ÙØ¬Ø±";
    }

    const diff = target - now;
    const h = String(Math.floor(diff/3600000)).padStart(2,"0");
    const m = String(Math.floor((diff%3600000)/60000)).padStart(2,"0");
    const s = String(Math.floor((diff%60000)/1000)).padStart(2,"0");
    timeEl.textContent = `${s} : ${m} : ${h}`;

    const hour = now.getHours() + now.getMinutes()/60;

    if(hour >= mh && hour < 24){
      note.textContent = "ØµØ­Ø© ÙØ·ÙˆØ±Ùƒ ğŸ¤ ØªÙ‚Ø¨Ù‘Ù„ Ø§Ù„Ù„Ù‡ ØµÙŠØ§Ù…Ùƒ";
    } else if(hour >= 0 && hour < 4.5){
      note.textContent = "Ø§Ù„Ù„ÙŠÙ„ ÙØ±ØµØ©â€¦ Ù‚ÙŠØ§Ù… ÙˆØ°ÙƒØ± ÙˆØ§Ø³ØªØºÙØ§Ø±";
    } else if(hour >= 4.5 && now < fajr){
      note.textContent = "Ø§Ù‚ØªØ±Ø¨ Ø§Ù„ÙØ¬Ø±â€¦ Ù†ÙŠØ© ØµØ§Ø¯Ù‚Ø© ÙˆØ³Ø­ÙˆØ± Ù…Ø¨Ø§Ø±Ùƒ";
    } else if(now >= fajr && hour < 12){
      note.textContent = "ØµØ¨Ø§Ø­ Ù…Ø¨Ø§Ø±Ùƒ ğŸŒ¿ ØªÙ‚Ø¨Ù‘Ù„ Ø§Ù„Ù„Ù‡ Ø·Ø§Ø¹ØªÙƒ";
    } else {
      note.textContent = "Ø³Ù„ ØµÙŠØ§Ù…Ùƒ Ø¨Ø°ÙƒØ± Ø§Ù„Ù„Ù‡â€¦ Ù„Ù… ÙŠØªØ¨Ù‚Ù Ø¥Ù„Ø§ Ø§Ù„Ù‚Ù„ÙŠÙ„";
    }
  }

  update();
  setInterval(update,1000);
}

window.onload = ()=>{
  const savedName = localStorage.getItem(STORAGE_KEY);
  if(savedName) showWelcome(savedName,false);
};
</script>

</body>
</html>
