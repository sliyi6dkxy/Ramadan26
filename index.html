<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ…</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600&display=swap" rel="stylesheet">
<style>
body{
  margin:0;
  font-family:'Tajawal', sans-serif;
  background:#fbf6e8;
  color:#4b3b2a;
}
.container{
  max-width:420px;
  margin:auto;
  padding:30px 16px;
}
.message{
  text-align:center;
  margin-bottom:25px;
  animation:fade .8s ease;
}
.moon{font-size:32px;}
h1{font-size:22px;margin:6px 0;}
p{font-size:17px;line-height:1.8;}
input,button{
  width:100%;
  padding:14px;
  font-size:16px;
  border-radius:18px;
  border:1px solid #d6c6a5;
  margin-top:12px;
  font-family:'Tajawal', sans-serif;
}
button{
  background:#7a9b7e;
  color:#fff;
  border:none;
}
button:active{transform:scale(.98);}
.hidden{display:none;}
@keyframes fade{
  from{opacity:0;transform:translateY(10px);}
  to{opacity:1;}
}
</style>
</head>
<body>
<div class="container">

  <!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„ -->
  <div id="registerBox">
    <div class="message">
      <div class="moon">ğŸŒ™</div>
      <h1>Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ…</h1>
      <p>Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù„ØªØµÙ„Ùƒ Ø§Ù„ØªØ°ÙƒÙŠØ±Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ© ÙˆØ§Ù„Ø£Ø¬Ø± Ø¨Ø¥Ø°Ù† Ø§Ù„Ù„Ù‡</p>
    </div>
    <input id="nameInput" placeholder="Ø§Ø³Ù…Ùƒ">
    <button onclick="start()">Ù…ØªØ§Ø¨Ø¹Ø©</button>
  </div>

  <!-- Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ -->
  <div id="welcomeBox" class="hidden">
    <div class="message">
      <div class="moon">ğŸŒ™</div>
      <h1 id="welcomeText"></h1>
      <p>Ù†Ø³Ø£Ù„ Ø§Ù„Ù„Ù‡ Ø£Ù† ÙŠÙƒØªØ¨ Ù„Ùƒ Ø§Ù„Ø£Ø¬Ø± Ø§Ù„ÙŠÙˆÙ…</p>
    </div>

    <button onclick="completeDay()">Ø£Ù†Ø¬Ø²Øª ÙˆØ±Ø¯ Ø§Ù„ÙŠÙˆÙ… âœ”</button>
  </div>

</div>

<script>
// Ø¶Ø¹ Ù‡Ù†Ø§ Ø±Ø§Ø¨Ø· Web App Ù…Ù† Google Apps Script
const API = "https://script.google.com/macros/s/AKfycbzxp5nFg85gSiQWHeYNFXltGvqhkSHgaSXGLmSOIyjpdjN-JZxYydXgww9rwt4bQsjB4A/exec";

let userId = null; // Ù…Ø¹Ø±Ù ÙØ±ÙŠØ¯ Ù„ÙƒÙ„ Ù…Ø³ØªØ®Ø¯Ù…

// Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ù…ØªØ§Ø¨Ø¹Ø©
function start(){
  const name = document.getElementById("nameInput").value.trim();
  if(!name) return;

  userId = Date.now().toString(); // ÙŠÙ…ÙƒÙ† ØªØ­Ø³ÙŠÙ†Ù‡ Ù„Ø§Ø­Ù‚Ø§Ù‹ Ù„ØªÙˆÙ„ÙŠØ¯ Ù…Ø¹Ø±Ù Ø¯Ø§Ø¦Ù…

  sendToSheet({
    Ø§Ù„Ø§Ø³Ù…: name,
    user_id: userId
  });

  showWelcome(name);
}

// Ø¹Ø±Ø¶ Ø§Ù„ØªØ±Ø­ÙŠØ¨
function showWelcome(name){
  document.getElementById("registerBox").classList.add("hidden");
  const box = document.getElementById("welcomeBox");
  box.classList.remove("hidden");
  document.getElementById("welcomeText").innerText = `Ù…Ø±Ø­Ø¨Ù‹Ø§ ${name}`;
}

// Ø¹Ù†Ø¯ Ø¶ØºØ· Ø²Ø± Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ÙŠÙˆÙ…
function completeDay(){
  if(!userId) return;

  sendToSheet({
    user_id: userId,
    action: "complete"
  });
}

// Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ù€ Google Sheets
function sendToSheet(data){
  fetch(API,{
    method:"POST",
    body: JSON.stringify(data)
  }).catch(err=>console.log("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„:", err));
}
</script>
</body>
</html>
